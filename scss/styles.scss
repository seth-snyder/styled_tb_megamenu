$color-grey: #ccc;
$color-black: #000;
$color-white: #fff;
$color-red: #e54e4b;
$color-background: #f5f5f5;
$color-text: #222;
$color-caption: #444;

// Colors with opacity.
$color-borders: rgba($color-black, 0.2);

$dropdown-width: 25rem;

.tbm {
  background-color: $color-background;
}

// Top level menu items.
.tbm-item.level-1 {
  > .tbm-link-container {
    > .tbm-link,
    > .tbm-no-link {
      color: $color-text;
      padding: 1rem 1.25rem;
    }
  }
}

// The caption that can appear below any <li>.
.tbm-caption {
  color: $color-caption;
  font-size: 0.75rem;
  margin-top: 0.25rem;
}

// The <a> or <span> tag for any menu item that has a submenu.
.tbm-toggle {
  // The top-level drodown caret.
  .caret {
    border-top: 0.25rem solid $color-text;
    border-right: 0.25rem solid transparent;
    border-left: 0.25rem solid transparent;
  }
}

// The <div> around any submenu dropdown. This is a direct descendent child of
// the <li>.
.tbm-submenu {
  background-color: $color-white;
  border-radius: 0;
  border-top-width: 0;
  border: 1px solid $color-borders;
  box-shadow: 0 5px 10px $color-borders;
  padding: 1rem;
  width: $dropdown-width;

  .tbm-submenu {
    // Anything other than the 1st dropdown menu needs the top border.
    border-top-width: 1px;
  }
}

// Any <li> that has sub-links, other than at the top level.
.tbm-item--has-flyout {
  position: relative;

  // The carat that appears next to the menu item.
  .tbm-link,
  .tbm-no-link {
    &:after {
      border-width: 0.25rem 0 0.25rem 0.25rem;
      border-left-color: $color-text;
    }
  }
}

// Any <ul> other than the top level.
.tbm-subnav {
  > .tbm-item {
    &:first-child {
      > .tbm-link-container {
        > .tbm-link,
        > .tbm-no-link {
          border-top: 0;
        }
      }
    }

    > .tbm-link-container {
      > .tbm-link,
      > .tbm-no-link {
        color: $color-text;
        display: block;
        padding: 0.5rem 0;

        &:hover,
        &:focus {
          color: $color-red;
        }
      }
    }
  }
}

// The mobile show/hide button.
.tbm-button {
  appearance: none;
  background-color: $color-background;
  border: 1px solid $color-borders;

  &:hover,
  &:focus,
  &:active,
  &.active,
  &.disabled,
  &[disabled] {
    background-color: $color-grey;
  }

  [class^='fa-'],
  [class*=' fa-'] {
    color: $color-text;
    margin: 0;
    text-shadow: none;
  }
}

// A .tbm-group is any <li> that has been designated as a "group" item, where
// the content within is not contained within a dropdown/submenu, but is instead
// always visible.

// The title of a .tbm-group.
.tbm-group-title {
  font-weight: bold;
  text-transform: uppercase;
}

// Mobile styles.
.tbm.tbm--mobile {
  background-color: transparent;

  // Borders for menu items.
  .tbm-item {
    border-top: 1px solid $color-borders;
  }

  // Colos for open top level menu items.
  .tbm-item.level-1 {
    &.open > .tbm-toggle {
      background-color: $color-black;
      color: $color-white;

      > .caret {
        border-top-color: $color-white;
      }
    }
  }

  // The wrapper around the entire menu.
  .tbm-collapse {
    background: $color-white;
    padding-top: 1rem;
  }

  // The top level ul.
  .tbm-nav {
    background: $color-background;
  }

  // The <div> around any submenu dropdown. This is a direct descendent child of
  // the <li>.
  .tbm-submenu {
    box-shadow: none;
    border-top: 1px solid $color-borders;

    .tbm-link,
    .tbm-no-link {
      padding: 1rem 1.25rem;
    }

    // The button that toggles the visibility of the submenu on mobile.
    .tbm-submenu-toggle {
      background-color: $color-white;
      color: currentColor;
    }
  }

  // The button that toggles the visibility of the submenu on mobile.
  .tbm-submenu-toggle {
    background-color: $color-background;
    color: $color-text;
    border-left: 1px solid $color-borders;
  }

  // Any <ul> other than the top level.
  .tbm-subnav {
    .tbm-item:first-child {
      border-top: 0;
    }

    .tbm-subnav {
      margin-left: 1rem;
    }
  }

  .tbm-block {
    margin-bottom: 0;
    padding: 0 1.25rem;
  }
}
