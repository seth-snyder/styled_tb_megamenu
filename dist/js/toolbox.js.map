{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/toolbox.js"],"names":["Drupal","TBMegaMenu","$","drupalSettings","behaviors","tbMegaMenuBackendAction","attach","context","change","css","display","val","click","parent","html","menu_name","undefined","megamenuAdmin","currentSelected","megamenu","nav_items","nav_subs","nav_cols","nav_all","modalTimeout","lockedAjax","lockAjax","isLockedAjax","releaseAjax","fn","options","defaultOptions","extend","find","add","each","a","liitem","closest","attr","sub","removeClass","hide_toolbox","bindEvents","unbind","event","stopPropagation","document","body","action","actions","datas","data","bind","keyCode","apply_toolbox","preventDefault","toggleSub","parseInt","length","column","TBElementsCounter","appendTo","addClass","unbindEvents","remove","update_toolbox","toggleAutoArrow","toggle","update_toggle","toggleAlwayShowSubmenu","showBlockTitle","value","show","callAjax","block_id","id","showblocktitle","toggleGroup","rebindEvents","hideWhenCollapse","type","toolbox_type","alignment","align","moveItemsLeft","$item","$liparent","level","$col","$items","itemidx","index","$moveitems","slice","itemleft","$rows","children","$cols","filter","colidx","oldSelected","addfirst","addColumn","$tocol","$ul","moveItemsRight","prependTo","show_toolbox","addRow","$row","rowUp","$prevRow","prev","trow","clone","trow1","replaceWith","rowDown","$nextRow","next","colcount","colwidths","defaultColumnsWidth","insertAfter","i","removeColumn","$allcols","$allmenucols","$haspos","type_menu","tocol","nextActiveCol","not","resetConfig","window","setTimeout","hide","ajax","url","saveConfigURL","contentType","JSON","stringify","theme","complete","r","status","statusMsg","responseText","t","status_modal","saveConfig","menu_config","items","$this","rows","$sub","cols","col_config","col","col_content","sub_level","ele","push","submenu_config","item_config","config","rows_content","block_config","code","clearTimeout","msgClass","$div","hasClass","tagName","show_intro","selected","has","liparent","$input","prop","trigger","input","name","isNaN","width","item","escapedInputText","checkPlain","prepend","append","msg","isJson","resp","parseJSON","err","content","close_button","currentElement","removeAttr","count","total","min","Math","floor","widths","els","mouseover","mouseout","prepare","tb_megamenu","form","ctrlelm","ctrl","rsp","initPanel","initPreSubmit","adminForm","onsubmit","e","isfunction","initRadioGroup","tb_megamenu_instance","label","checked","on","jQuery"],"mappings":"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","file":"js/toolbox.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./js/toolbox.js\");\n","/**\n * @file\n * Defines Javascript behaviors for MegaMenu toolbox.\n */\n\nDrupal.TBMegaMenu = Drupal.TBMegaMenu || {};\n\n(function ($, Drupal, drupalSettings) {\n  'use strict';\n\n  Drupal.behaviors.tbMegaMenuBackendAction = {\n    attach: function (context) {\n      $('select[name=\"tbm-animation\"]').change(function () {\n        $('#tbm-duration-wrapper').css({\n          display: $(this).val() == 'none' ? 'none' : 'inline-block',\n        });\n        $('#tbm-delay-wrapper').css({\n          display: $(this).val() == 'none' ? 'none' : 'inline-block',\n        });\n      });\n\n      $('.tbm-column-inner .close').click(function () {\n        $(this).parent().html('');\n      });\n\n      /* Init TB Mega Menu. */\n      if (drupalSettings.TBMegaMenu.menu_name !== undefined) {\n        $('#tbm-admin-mm-container').megamenuAdmin({\n          menu_name: drupalSettings.TBMegaMenu.menu_name,\n        });\n      }\n    },\n  };\n\n  var currentSelected = null,\n    megamenu,\n    nav_items,\n    nav_subs,\n    nav_cols,\n    nav_all;\n  var modalTimeout;\n  Drupal.TBMegaMenu.lockedAjax = false;\n\n  Drupal.TBMegaMenu.lockAjax = function () {\n    Drupal.TBMegaMenu.lockedAjax = true;\n  };\n\n  Drupal.TBMegaMenu.isLockedAjax = function () {\n    return Drupal.TBMegaMenu.lockedAjax;\n  };\n\n  Drupal.TBMegaMenu.releaseAjax = function () {\n    Drupal.TBMegaMenu.lockedAjax = false;\n  };\n\n  $.fn.megamenuAdmin = function (options) {\n    var defaultOptions = {};\n    var options = $.extend(defaultOptions, options);\n    megamenu = $(this).find('.tbm');\n    nav_items = megamenu.find('ul[class*=\"level\"]>li>:first-child');\n    nav_subs = megamenu.find('.tbm-item-child');\n    nav_cols = megamenu.find('[class*=\"span\"]');\n\n    nav_all = nav_items.add(nav_subs).add(nav_cols);\n    nav_items.each(function () {\n      var a = $(this);\n      var liitem = a.closest('li');\n      if (liitem.attr('data-hidesub') == 1) {\n        var sub = liitem.find('.tbm-item-child:first');\n        sub.css('display', 'none');\n        a.removeClass('tbm-toggle').attr('data-toggle', '');\n        liitem.removeClass('tbm-item--has-dropdown tbm-item--has-flyout');\n      }\n    });\n\n    hide_toolbox(true);\n\n    bindEvents(nav_all);\n    $('.toolbox-action, .toolbox-toggle, .toolbox-input').unbind(\n      'focus blur click change keydown',\n    );\n    $('.tbm-admin-mm-row').click(function (event) {\n      event.stopPropagation();\n    });\n\n    $(document.body).click(function (event) {\n      hide_toolbox(true);\n    });\n    $('.back-megamenu-toolbox').click(function (event) {\n      hide_toolbox(true);\n    });\n\n    $('.toolbox-action').click(function (event) {\n      var action = $(this).attr('data-action');\n      if (action) {\n        actions.datas = $(this).data();\n        actions[action](options);\n      }\n      event.stopPropagation();\n      return false;\n    });\n\n    $('.toolbox-toggle').change(function (event) {\n      var action = $(this).attr('data-action');\n      if (action) {\n        actions.datas = $(this).data();\n        actions[action](options);\n      }\n      event.stopPropagation();\n      return false;\n    });\n\n    $('.toolbox-input').bind('focus blur click', function (event) {\n      event.stopPropagation();\n      return false;\n    });\n\n    $('.toolbox-input').bind('keydown', function (event) {\n      if (event.keyCode == '13') {\n        apply_toolbox(this);\n        event.preventDefault();\n      }\n    });\n\n    $('.toolbox-input').change(function (event) {\n      apply_toolbox(this);\n      event.stopPropagation();\n      return false;\n    });\n    return this;\n  };\n\n  var actions = {};\n  actions.data = {};\n  actions.toggleSub = function () {\n    if (!currentSelected) {\n      return;\n    }\n    var liitem = currentSelected.closest('li'),\n      sub = liitem.find('.tbm-item-child:first');\n    if (parseInt(liitem.attr('data-group'))) {\n      return;\n    }\n    if (sub.length == 0 || sub.css('display') == 'none') {\n      if (sub.length == 0) {\n        var column = ++drupalSettings.TBMegaMenu.TBElementsCounter.column;\n        sub = $(\n          '<div class=\"tbm-submenu tbm-item-child\"><div class=\"tbm-row\"><div id=tbm-column-' +\n            column +\n            ' class=\"span12\" data-width=\"12\"><div class=\"tbm-column-inner\"></div></div></div></div>',\n        ).appendTo(liitem);\n        bindEvents(sub.find('[class*=\"span\"]'));\n      } else {\n        sub.css('display', '');\n        liitem.attr('data-hidesub', 0);\n      }\n      liitem.attr('data-group', 0);\n      currentSelected\n        .addClass('tbm-toggle')\n        .attr('data-toggle', 'tbm-item--has-dropdown');\n      liitem.addClass(\n        liitem.attr('data-level') == 1\n          ? 'tbm-item--has-dropdown'\n          : 'tbm-item--has-flyout',\n      );\n      bindEvents(sub);\n    } else {\n      unbindEvents(sub);\n      if (liitem.find('ul.level-' + liitem.attr('data-level')).length > 0) {\n        sub.css('display', 'none');\n        liitem.attr('data-hidesub', 1);\n      } else {\n        sub.remove();\n      }\n      liitem.attr('data-group', 0);\n      currentSelected.removeClass('tbm-toggle').attr('data-toggle', '');\n      liitem.removeClass('tbm-item--has-dropdown tbm-item--has-flyout');\n    }\n    update_toolbox();\n  };\n\n  actions.toggleAutoArrow = function () {\n    var toggle = $('.toolitem-auto-arrow');\n    toggle\n      .find('label')\n      .removeClass('active btn-success btn-danger btn-primary');\n    if (parseInt(toggle.attr('data-auto-arrow'))) {\n      update_toggle(toggle, 0);\n      toggle.attr('data-auto-arrow', 0);\n    } else {\n      update_toggle(toggle, 1);\n      toggle.attr('data-auto-arrow', 1);\n    }\n  };\n\n  actions.toggleAlwayShowSubmenu = function () {\n    var toggle = $('.toolitem-always-show-submenu');\n    toggle\n      .find('label')\n      .removeClass('active btn-success btn-danger btn-primary');\n    if (parseInt(toggle.attr('data-always-show-submenu'))) {\n      update_toggle(toggle, 0);\n      toggle.attr('data-always-show-submenu', 0);\n    } else {\n      update_toggle(toggle, 1);\n      toggle.attr('data-always-show-submenu', 1);\n    }\n  };\n\n  actions.showBlockTitle = function () {\n    if (!currentSelected) {\n      return;\n    }\n    var toggle = $('.toolcol-showblocktitle');\n    toggle\n      .find('label')\n      .removeClass('active btn-success btn-danger btn-primary');\n    if (parseInt(currentSelected.attr('data-showblocktitle'))) {\n      update_toggle(toggle, 0);\n      currentSelected.attr('data-showblocktitle', 0);\n    } else {\n      update_toggle(toggle, 1);\n      currentSelected.attr('data-showblocktitle', 1);\n    }\n    if ($('#tbm-block-wrapper select[name=\"toolcol-block\"]').val() != '') {\n      var value = $('#tbm-block-wrapper select[name=\"toolcol-block\"]').val();\n      $('#tbm-admin-mm-tb #toolbox-loading').show();\n      callAjax({\n        action: 'load_block',\n        block_id: value,\n        id: currentSelected.attr('id'),\n        showblocktitle: parseInt(currentSelected.attr('data-showblocktitle')),\n      });\n    }\n  };\n\n  actions.toggleGroup = function () {\n    if (!currentSelected) {\n      return;\n    }\n    var liitem = currentSelected.parent();\n    var sub = liitem.find('.tbm-item-child:first');\n    if (liitem.attr('data-level') == 1) {\n      return;\n    } // Ignore for top level.\n    if (parseInt(liitem.attr('data-group'))) {\n      liitem.attr('data-group', 0);\n      liitem.removeClass('tbm-group').addClass('tbm-item--has-flyout');\n      currentSelected\n        .addClass('tbm-toggle')\n        .attr('data-toggle', 'tbm-item--has-dropdown');\n      sub.removeClass('tbm-group-container').addClass('tbm-submenu');\n      sub.css('width', sub.attr('data-width'));\n      rebindEvents(sub);\n    } else {\n      currentSelected.removeClass('tbm-toggle').attr('data-toggle', '');\n      liitem.attr('data-group', 1);\n      liitem.removeClass('tbm-item--has-flyout').addClass('tbm-group');\n      sub.removeClass('tbm-submenu').addClass('tbm-group-container');\n      sub.css('width', '');\n      rebindEvents(sub);\n    }\n    update_toolbox();\n  };\n\n  actions.hideWhenCollapse = function () {\n    if (!currentSelected) {\n      return;\n    }\n    var type = toolbox_type();\n    if (type == 'sub') {\n      var liitem = currentSelected.closest('li');\n      if (parseInt(liitem.attr('data-hidewcol'))) {\n        liitem.attr('data-hidewcol', 0);\n        liitem.removeClass('sub-hidden-collapse');\n      } else {\n        liitem.attr('data-hidewcol', 1);\n        liitem.addClass('sub-hidden-collapse');\n      }\n    } else if (type == 'col') {\n      if (parseInt(currentSelected.attr('data-hidewcol'))) {\n        currentSelected.attr('data-hidewcol', 0);\n        currentSelected.removeClass('hidden-collapse');\n      } else {\n        currentSelected.attr('data-hidewcol', 1);\n        currentSelected.addClass('hidden-collapse');\n      }\n    }\n    update_toolbox();\n  };\n\n  actions.alignment = function () {\n    var liitem = currentSelected.closest('li');\n    liitem\n      .removeClass('tbm-left tbm-center tbm-right tbm-justify')\n      .addClass('tbm-' + actions.datas.align);\n    if (actions.datas.align == 'justify') {\n      currentSelected.addClass('span12');\n      currentSelected.css('width', '');\n    } else {\n      currentSelected.removeClass('span12');\n      if (currentSelected.attr('data-width')) {\n        currentSelected.css('width', currentSelected.attr('data-width'));\n      }\n    }\n    liitem.attr('data-alignsub', actions.datas.align);\n    update_toolbox();\n  };\n\n  actions.moveItemsLeft = function () {\n    if (!currentSelected) {\n      return;\n    }\n    var $item = currentSelected.closest('li'),\n      $liparent = $item.parent().closest('li'),\n      level = $liparent.attr('data-level'),\n      $col = $item.closest('[class*=\"span\"]'),\n      $items = $col.find('ul:first > li'),\n      itemidx = $items.index($item),\n      $moveitems = $items.slice(0, itemidx + 1),\n      itemleft = $items.length - $moveitems.length,\n      $rows = $col.parent().parent().children('[class*=\"row\"]'),\n      $cols = $rows.children('[class*=\"span\"]').filter(function () {\n        return !$(this).attr('data-block');\n      }),\n      colidx = $cols.index($col);\n    if (!$liparent.length) {\n      return;\n    } // Need make this is mega first.\n\n    if (colidx == 0) {\n      var oldSelected = currentSelected;\n      currentSelected = $col;\n      actions.datas.addfirst = true;\n      actions.addColumn();\n      $cols = $rows.children('[class*=\"span\"]').filter(function () {\n        return !$(this).attr('data-block');\n      });\n      currentSelected = oldSelected;\n      colidx++;\n    }\n    var $tocol = $($cols[colidx - 1]);\n    var $ul = $tocol.find('ul:first');\n    if (!$ul.length) {\n      $ul = $('<ul class=\"level' + level + ' tbm-subnav\">').appendTo(\n        $tocol.children('.tbm-column-inner'),\n      );\n    }\n    $moveitems.appendTo($ul);\n    if (itemleft == 0) {\n      $col.find('ul:first').remove();\n    }\n    update_toolbox();\n  };\n\n  actions.moveItemsRight = function () {\n    if (!currentSelected) {\n      return;\n    }\n    var $item = currentSelected.closest('li'),\n      $liparent = $item.parent().closest('li'),\n      level = $liparent.attr('data-level'),\n      $col = $item.closest('[class*=\"span\"]'),\n      $items = $col.find('ul:first > li'),\n      itemidx = $items.index($item),\n      $moveitems = $items.slice(itemidx),\n      itemleft = $items.length - $moveitems.length,\n      $rows = $col.parent().parent().children('[class*=\"row\"]'),\n      $cols = $rows.children('[class*=\"span\"]').filter(function () {\n        return (\n          $(this).children('.tbm-column-inner').children('.tbm-block').length ==\n          0\n        );\n      });\n\n    var colidx = $cols.index($col);\n    if (!$liparent.length) {\n      return;\n    } // Need make this is mega first.\n\n    if (colidx == $cols.length - 1) {\n      var oldSelected = currentSelected;\n      currentSelected = $col;\n      actions.datas.addfirst = false;\n      actions.addColumn();\n      ($cols = $rows.children('[class*=\"span\"]').filter(function () {\n        return (\n          $(this).children('.tbm-column-inner').children('.tbm-block').length ==\n          0\n        );\n      })),\n        (currentSelected = oldSelected);\n    }\n    var $tocol = $($cols[colidx + 1]);\n    var $ul = $tocol.find('.tbm-column-inner ul.tbm-subnav:first');\n    if (!$ul.length) {\n      $ul = $('<ul class=\"level' + level + ' tbm-subnav\">').appendTo(\n        $tocol.children('.tbm-column-inner'),\n      );\n    }\n    $moveitems.prependTo($ul);\n    if (itemleft == 0) {\n      $col.find('ul:first').remove();\n    }\n    show_toolbox(currentSelected);\n  };\n\n  actions.addRow = function () {\n    if (!currentSelected) {\n      return;\n    }\n    var column = ++drupalSettings.TBMegaMenu.TBElementsCounter.column;\n    var $row = $(\n        '<div class=\"tbm-row\"><div id=tbm-column-' +\n          column +\n          ' class=\"span12\"><div class=\"tbm-column-inner\"></div></div></div>',\n      ).appendTo(currentSelected.find('[class*=\"row\"]:first').parent()),\n      $col = $row.children();\n    bindEvents($col);\n    currentSelected = null;\n    show_toolbox($col);\n  };\n\n  actions.rowUp = function () {\n    if (!currentSelected) {\n      return;\n    }\n    var $row = $(currentSelected.closest('.tbm-row'));\n    var $rows = $row.parent();\n    var $prevRow = $row.prev();\n    if ($prevRow.length == 0) {\n      return;\n    }\n    var trow = $row.clone();\n    var trow1 = $prevRow.clone();\n    $row.replaceWith(trow1);\n    $prevRow.replaceWith(trow);\n    // Reset all events on new structure.\n    megamenu = $('#tbm-admin-mm-container').find('.tbm');\n    nav_items = megamenu.find('ul[class*=\"level\"]>li>:first-child');\n    nav_subs = megamenu.find('.tbm-item-child');\n    nav_cols = megamenu.find('[class*=\"span\"]');\n    nav_all = nav_items.add(nav_subs).add(nav_cols);\n    bindEvents(nav_all);\n    currentSelected = $rows.find('.selected');\n  };\n\n  actions.rowDown = function () {\n    if (!currentSelected) {\n      return;\n    }\n    var $row = $(currentSelected.closest('.tbm-row'));\n    var $rows = $row.parent();\n    var $nextRow = $row.next();\n    if ($nextRow.length == 0) {\n      return;\n    }\n    var trow = $row.clone();\n    var trow1 = $nextRow.clone();\n    $row.replaceWith(trow1);\n    $nextRow.replaceWith(trow);\n\n    // Reset all events on new structure.\n    megamenu = $('#tbm-admin-mm-container').find('.tbm');\n    nav_items = megamenu.find('ul[class*=\"level\"]>li>:first-child');\n    nav_subs = megamenu.find('.tbm-item-child');\n    nav_cols = megamenu.find('[class*=\"span\"]');\n    nav_all = nav_items.add(nav_subs).add(nav_cols);\n    bindEvents(nav_all);\n\n    currentSelected = $rows.find('.selected');\n  };\n\n  actions.addColumn = function () {\n    if (!currentSelected) {\n      return;\n    }\n    var $cols = currentSelected.parent().children('[class*=\"span\"]');\n    var colcount = $cols.length + 1;\n    var colwidths = defaultColumnsWidth(colcount);\n    var column = ++drupalSettings.TBMegaMenu.TBElementsCounter.column;\n    var $col = $(\n      '<div id=tbm-column-' +\n        column +\n        '><div class=\"tbm-column-inner\"></div></div>',\n    );\n    if (actions.datas.addfirst) {\n      $col.prependTo(currentSelected.parent());\n    } else {\n      $col.insertAfter(currentSelected);\n    }\n    $cols = $cols.add($col);\n    bindEvents($col);\n    $cols.each(function (i) {\n      $(this)\n        .removeClass('span' + $(this).attr('data-width'))\n        .addClass('span' + colwidths[i])\n        .attr('data-width', colwidths[i]);\n    });\n    show_toolbox($col);\n  };\n\n  actions.removeColumn = function () {\n    if (!currentSelected) {\n      return;\n    }\n\n    var $col = currentSelected,\n      $row = $col.parent(),\n      $rows = $row.parent().children('[class*=\"row\"]'),\n      $allcols = $rows.children('[class*=\"span\"]'),\n      $allmenucols = $allcols.filter(function () {\n        return !$(this).attr('data-block');\n      }),\n      $haspos = $allcols.filter(function () {\n        return $(this).attr('data-block');\n      }).length,\n      $cols = $row.children('[class*=\"span\"]'),\n      colcount = $cols.length - 1,\n      colwidths = defaultColumnsWidth(colcount),\n      type_menu = $col.attr('data-block') ? false : true;\n\n    if (\n      (type_menu &&\n        ((!$haspos && $allmenucols.length == 1) ||\n          ($haspos && $allmenucols.length == 0))) ||\n      $allcols.length == 1\n    ) {\n      show_toolbox($(currentSelected).closest('.tbm-item'));\n      currentSelected = $(currentSelected).closest('.tbm-item');\n      currentSelected.find('.tbm-submenu').remove();\n    }\n    // If this is the only one column left.\n    else {\n      if (type_menu) {\n        var colidx = $allmenucols.index($col),\n          tocol = colidx == 0 ? $allmenucols[1] : $allmenucols[colidx - 1];\n\n        $col.find('ul:first > li').appendTo($(tocol).find('ul:first'));\n      }\n\n      var colidx = $allcols.index($col),\n        nextActiveCol = colidx == 0 ? $allcols[1] : $allcols[colidx - 1];\n\n      if (colcount < 1) {\n        $row.remove();\n      } else {\n        $cols = $cols.not($col);\n        $cols.each(function (i) {\n          $(this)\n            .removeClass('span' + $(this).attr('data-width'))\n            .addClass('span' + colwidths[i])\n            .attr('data-width', colwidths[i]);\n        });\n        $col.remove();\n      }\n      show_toolbox($(nextActiveCol));\n    }\n  };\n\n  actions.resetConfig = function (options) {\n    if (Drupal.TBMegaMenu.isLockedAjax()) {\n      window.setTimeout(function () {\n        actions.resetConfig(options);\n      }, 200);\n      return;\n    }\n    Drupal.TBMegaMenu.lockAjax();\n    $('#tbm-admin-mm-tb #toolbox-message').html('').hide();\n    $('#tbm-admin-mm-tb #toolbox-loading').show();\n    $.ajax({\n      type: 'POST',\n      url: drupalSettings.TBMegaMenu.saveConfigURL,\n      contentType: 'application/json; charset=utf-8',\n      data: JSON.stringify({\n        action: 'load',\n        theme: drupalSettings.TBMegaMenu.theme,\n        menu_name: options['menu_name'],\n      }),\n      complete: function (r) {\n        switch (r.status) {\n          // If an error occurred only set a status message.\n          case 500:\n            var statusMsg = r.responseText;\n            break;\n          // When successful revert the configuration displayed in the UI.\n          default:\n            $('#tbm-admin-mm-container')\n              .html(r.responseText)\n              .megamenuAdmin({ menu_name: options['menu_name'] });\n            // Collapse all expanded menu items.\n            $('#tbm-admin-mm-container')\n              .find('.tbm-column-inner')\n              .children('span.close')\n              .click(function () {\n                $(this).parent().html('');\n              });\n            // Set a confirmation message.\n            var statusMsg = Drupal.t('All unsaved changes have been reverted.');\n        }\n        // Display the status message modal.\n        status_modal(r.status, statusMsg);\n\n        Drupal.TBMegaMenu.releaseAjax();\n      },\n    });\n  };\n\n  actions.saveConfig = function (options) {\n    if (Drupal.TBMegaMenu.isLockedAjax()) {\n      window.setTimeout(function () {\n        actions.saveConfig(options);\n      }, 200);\n      return;\n    }\n    Drupal.TBMegaMenu.lockAjax();\n    var menu_config = {},\n      items = megamenu.find('ul[class*=\"level\"] > li');\n    items.each(function () {\n      var $this = $(this),\n        id = $this.attr('data-id'),\n        rows = [];\n      var level = parseInt($this.attr('data-level'));\n      var $sub = $this.find('.tbm-item-child:first');\n      var $rows = $sub\n        .find('[class*=\"row\"]:first')\n        .parent()\n        .children('[class*=\"row\"]');\n      $rows.each(function () {\n        var $cols = $(this).children('[class*=\"span\"]');\n        var cols = [];\n        $cols.each(function () {\n          var col_config = {};\n          col_config['width'] = $(this).attr('data-width')\n            ? $(this).attr('data-width')\n            : '';\n          col_config['class'] = $(this).attr('data-class')\n            ? $(this).attr('data-class')\n            : '';\n          col_config['hidewcol'] = $(this).attr('data-hidewcol')\n            ? $(this).attr('data-hidewcol')\n            : '';\n          col_config['showblocktitle'] = $(this).attr('data-showblocktitle')\n            ? $(this).attr('data-showblocktitle')\n            : '1';\n          var col = { col_content: [], col_config: col_config };\n          $(this)\n            .find('ul[class*=\"level\"] > li')\n            .each(function () {\n              var sub_level = parseInt($(this).attr('data-level'));\n              if (sub_level == level + 1) {\n                var ele = {};\n                ele['plugin_id'] = $(this).attr('data-id');\n                ele['type'] = $(this).attr('data-type');\n                ele['tb_item_config'] = {};\n                col['col_content'].push(ele);\n              }\n            });\n          $(this)\n            .children('.tbm-column-inner')\n            .children('.tbm-block')\n            .each(function () {\n              var ele = {};\n              ele['block_id'] = $(this).attr('data-block');\n              ele['type'] = $(this).attr('data-type');\n              ele['tb_item_config'] = {};\n              col['col_content'].push(ele);\n            });\n          if (col['col_content'].length) {\n            cols.push(col);\n          }\n        });\n        if (cols.length) {\n          rows.push(cols);\n        }\n      });\n      var submenu_config = {};\n      submenu_config['width'] = $this\n        .children('.tbm-submenu')\n        .attr('data-width')\n        ? $this.children('.tbm-submenu').attr('data-width')\n        : '';\n      submenu_config['class'] = $this\n        .children('.tbm-submenu')\n        .attr('data-class')\n        ? $this.children('.tbm-submenu').attr('data-class')\n        : '';\n      submenu_config['group'] = $this.attr('data-group')\n        ? $this.attr('data-group')\n        : 0;\n      var item_config = {};\n      item_config['class'] = $this.attr('data-class')\n        ? $this.attr('data-class')\n        : '';\n      item_config['xicon'] = $this.attr('data-xicon')\n        ? $this.attr('data-xicon')\n        : '';\n      item_config['caption'] = $this.attr('data-caption')\n        ? $this.attr('data-caption')\n        : '';\n      item_config['alignsub'] = $this.attr('data-alignsub')\n        ? $this.attr('data-alignsub')\n        : '';\n      item_config['group'] = $this.attr('data-group')\n        ? $this.attr('data-group')\n        : '';\n      item_config['hidewcol'] = $this.attr('data-hidewcol')\n        ? $this.attr('data-hidewcol')\n        : 1;\n      item_config['hidesub'] = $this.attr('data-hidesub')\n        ? $this.attr('data-hidesub')\n        : 1;\n      item_config['label'] = $this.attr('data-label')\n        ? $this.attr('data-label')\n        : '';\n      var config = {\n        rows_content: rows,\n        submenu_config: submenu_config,\n        item_config: item_config,\n      };\n      menu_config[id] = config;\n    });\n    var block_config = {};\n    block_config['animation'] = $('select[name=\"tbm-animation\"]').val();\n    block_config['duration'] = parseInt($('input[name=\"tbm-duration\"]').val());\n    block_config['delay'] = parseInt($('input[name=\"tbm-delay\"]').val());\n    block_config['style'] = $('select[name=\"tbm-style\"]').val();\n    block_config['breakpoint'] = parseInt(\n      $('input[name=\"tbm-breakpoint\"]').val(),\n    );\n    block_config['auto-arrow'] = $(\n      '#tbm-admin-mm-intro .toolitem-auto-arrow',\n    ).attr('data-auto-arrow');\n    block_config['always-show-submenu'] = $(\n      '#tbm-admin-mm-intro .toolitem-always-show-submenu',\n    ).attr('data-always-show-submenu');\n    block_config['number-columns'] =\n      drupalSettings.TBMegaMenu.TBElementsCounter.column;\n    $('#tbm-admin-mm-tb #toolbox-message').html('').hide();\n    $('#tbm-admin-mm-tb #toolbox-loading').show();\n    $.ajax({\n      type: 'POST',\n      url: drupalSettings.TBMegaMenu.saveConfigURL,\n      contentType: 'application/json; charset=utf-8',\n      data: JSON.stringify({\n        action: 'save',\n        theme: drupalSettings.TBMegaMenu.theme,\n        menu_name: options['menu_name'],\n        menu_config: menu_config,\n        block_config: block_config,\n      }),\n      complete: function (r) {\n        // Set the status message based on the response.\n        var statusMsg = r.responseText;\n        // Show the status message modal.\n        status_modal(r.status, statusMsg);\n\n        Drupal.TBMegaMenu.releaseAjax();\n      },\n    });\n  };\n\n  var status_modal = function (code, statusMsg) {\n    // Clear any previously set timeouts and hide any visible modals.\n    clearTimeout(modalTimeout);\n    $('#tbm-admin-mm-tb #toolbox-message').html('').hide();\n    // Set the message container class based on the status code.\n    switch (code) {\n      case 500:\n        var msgClass = 'messages--error';\n        break;\n      default:\n        var msgClass = 'messages--status';\n    }\n    // Hide the loading animation.\n    $('#tbm-admin-mm-tb #toolbox-loading').hide();\n    // Build the modal status message container.\n    var $div = $(\n      '<div class=\"messages ' +\n        msgClass +\n        '\" role=\"contentinfo\" aria-label=\"Status message\"><h2 class=\"visually-hidden\">Status message</h2><span class=\"close fa fa-times-circle\" title=\"Dismiss this message\">&nbsp;</span>' +\n        statusMsg +\n        '</div>',\n    );\n    // Show the modal and bind a click event to its close (X) button.\n    $('#tbm-admin-mm-tb #toolbox-message').html($div).show();\n    $('#tbm-admin-mm-tb #toolbox-message span.close').click(function () {\n      $(this).parent().html('').hide();\n    });\n    // Auto-dismiss all success messages after a delay.\n    if (code == 200) {\n      modalTimeout = window.setTimeout(function () {\n        $('#tbm-admin-mm-tb #toolbox-message').html('').hide();\n      }, 7000);\n    }\n  };\n\n  var toolbox_type = function () {\n    return currentSelected\n      ? currentSelected.hasClass('tbm-item-child')\n        ? 'sub'\n        : currentSelected[0].tagName == 'DIV'\n        ? 'col'\n        : 'item'\n      : false;\n  };\n\n  var hide_toolbox = function (show_intro) {\n    $('#tbm-admin-mm-tb .admin-toolbox').hide();\n    currentSelected = null;\n    if (megamenu && megamenu.data('nav_all')) {\n      megamenu.data('nav_all').removeClass('selected');\n    }\n    megamenu.find('li').removeClass('open');\n    if (show_intro) {\n      $('#tbm-admin-mm-intro').show();\n    } else {\n      $('#tbm-admin-mm-intro').hide();\n    }\n  };\n\n  var show_toolbox = function (selected) {\n    if (!selected.hasClass('tbm-column') && !selected.hasClass('tbm-submenu')) {\n      var level = parseInt($(selected).parent().attr('data-level'));\n      if (level > 1) {\n        $('#toogle-group-wrapper').show();\n        $('#toogle-break-column-wrapper').show();\n      } else {\n        $('#toogle-group-wrapper').hide();\n        $('#toogle-break-column-wrapper').hide();\n      }\n    }\n    hide_toolbox(false);\n    if (selected) {\n      currentSelected = selected;\n    }\n    // Remove class open for other.\n    megamenu.find('ul[class*=\"level\"] > li').each(function () {\n      if (!$(this).has(currentSelected).length > 0) {\n        $(this).removeClass('open');\n      } else {\n        $(this).addClass('open');\n      }\n    });\n\n    // Set selected.\n    megamenu.data('nav_all').removeClass('selected');\n    currentSelected.addClass('selected');\n    var type = toolbox_type();\n    $('#tbm-admin-mm-tool' + type).show();\n    update_toolbox(type);\n\n    $('#tbm-admin-mm-tb').show();\n  };\n\n  var update_toolbox = function (type) {\n    if (!type) {\n      type = toolbox_type();\n    }\n    $('#tbm-admin-mm-tb .disabled').removeClass('disabled');\n    $('#tbm-admin-mm-tb .active').removeClass('active');\n    switch (type) {\n      case 'item':\n        var liitem = currentSelected.closest('li'),\n          liparent = liitem.parent().closest('li'),\n          sub = liitem.find('.tbm-item-child:first');\n\n        $('.toolitem-exclass').val(liitem.attr('data-class'));\n        $('.toolitem-xicon').val(liitem.attr('data-xicon'));\n        $('.toolitem-caption').val(liitem.attr('data-caption'));\n\n        var toggle = $('.toolitem-sub');\n        toggle\n          .find('label')\n          .removeClass('active btn-success btn-danger btn-primary');\n        if (parseInt(liitem.attr('data-group'))) {\n          toggle.addClass('disabled');\n        } else if (sub.length == 0 || sub.css('display') == 'none') {\n          update_toggle(toggle, 0);\n        } else {\n          update_toggle(toggle, 1);\n        }\n\n        var toggle = $('.toolitem-group');\n        toggle\n          .find('label')\n          .removeClass('active btn-success btn-danger btn-primary');\n        if (\n          parseInt(liitem.attr('data-level')) == 1 ||\n          sub.length == 0 ||\n          parseInt(liitem.attr('data-hidesub')) == 1\n        ) {\n          $('.toolitem-group').addClass('disabled');\n        } else if (parseInt(liitem.attr('data-group'))) {\n          update_toggle(toggle, 1);\n        } else {\n          update_toggle(toggle, 0);\n        }\n\n        if (!liparent.length || !liparent.hasClass('tbm-item')) {\n          $('.toolitem-moveleft, .toolitem-moveright').addClass('disabled');\n        }\n        break;\n\n      case 'sub':\n        var liitem = currentSelected.closest('li');\n        $('.toolsub-exclass').attr(\n          'value',\n          currentSelected.attr('data-class') || '',\n        );\n\n        if (parseInt(liitem.attr('data-group'))) {\n          $('.toolsub-width').attr('value', '').addClass('disabled');\n          $('.toolitem-alignment').addClass('disabled');\n        } else {\n          $('.toolsub-width').val(currentSelected.attr('data-width'));\n          if (parseInt(liitem.attr('data-level')) > 1) {\n            $('.toolsub-align-center').addClass('disabled');\n            $('.toolsub-align-justify').addClass('disabled');\n          }\n\n          if (liitem.attr('data-alignsub')) {\n            $('.toolsub-align-' + liitem.attr('data-alignsub')).addClass(\n              'active',\n            );\n            if (liitem.attr('data-alignsub') == 'justify') {\n              $('.toolsub-width').addClass('disabled');\n            }\n          }\n        }\n\n        var toggle = $('.toolsub-hidewhencollapse');\n        toggle\n          .find('label')\n          .removeClass('active btn-success btn-danger btn-primary');\n        if (parseInt(liitem.attr('data-hidewcol'))) {\n          update_toggle(toggle, 1);\n        } else {\n          update_toggle(toggle, 0);\n        }\n        break;\n\n      case 'col':\n        $('.toolcol-block').val(\n          currentSelected\n            .children('.tbm-column-inner')\n            .children('.tbm-block')\n            .attr('data-block') || '',\n        );\n        $('.toolcol-width').val(currentSelected.attr('data-width') || '');\n        $('.toolcol-exclass').attr(\n          'value',\n          currentSelected.attr('data-class') || '',\n        );\n        if (currentSelected.find('.tbm-subnav').length > 0) {\n          $('.toolcol-block').parent().addClass('disabled');\n        }\n        if (currentSelected.parent().children().length == 1) {\n          $('.toolcol-width').parent().addClass('disabled');\n        }\n\n        var toggle = $('.toolcol-hidewhencollapse');\n        toggle\n          .find('label')\n          .removeClass('active btn-success btn-danger btn-primary');\n        if (parseInt(currentSelected.attr('data-hidewcol'))) {\n          update_toggle(toggle, 1);\n        } else {\n          update_toggle(toggle, 0);\n        }\n        var toggle = $('.toolcol-showblocktitle');\n        toggle\n          .find('label')\n          .removeClass('active btn-success btn-danger btn-primary');\n        if (\n          !currentSelected.attr('data-showblocktitle') ||\n          parseInt(currentSelected.attr('data-showblocktitle'))\n        ) {\n          update_toggle(toggle, 1);\n        } else {\n          update_toggle(toggle, 0);\n        }\n        break;\n    }\n  };\n\n  var update_toggle = function (toggle, val) {\n    var $input = toggle.find('input[value=\"' + val + '\"]');\n    /**\n     * We use this function to set the check attribute.\n     * For jquery 1.9 or higher, instead of $input.attr('checked', 'checked');\n     */\n    $input.prop('checked', true);\n    $input.trigger('update');\n  };\n\n  var apply_toolbox = function (input) {\n    var name = $(input).attr('data-name'),\n      value = input.value,\n      type = toolbox_type();\n    switch (name) {\n      case 'width':\n        value = parseInt(value);\n        if (isNaN(value)) {\n          value = '';\n          if (type == 'sub') {\n            currentSelected.width(value);\n          }\n          if (type == 'col') {\n            currentSelected.removeClass(\n              'span' + currentSelected.attr('data-' + name),\n            );\n          }\n          currentSelected.attr('data-' + name, value);\n        } else {\n          if (type == 'sub') {\n            currentSelected.width(value);\n          }\n          if (type == 'col') {\n            currentSelected\n              .removeClass('span' + currentSelected.attr('data-' + name))\n              .addClass('span' + value);\n          }\n          currentSelected.attr('data-' + name, value);\n        }\n        $(input).val(value);\n        break;\n\n      case 'duration':\n        value = parseInt(value);\n        if (isNaN(value)) {\n          value = '';\n        }\n        $(input).val(value);\n        break;\n\n      case 'delay':\n        value = parseInt(value);\n        if (isNaN(value)) {\n          value = '';\n        }\n        $(input).val(value);\n        break;\n\n      case 'class':\n        if (type == 'item') {\n          var item = currentSelected.closest('li');\n        } else {\n          var item = currentSelected;\n        }\n        item.removeClass(item.attr('data-' + name) || '').addClass(value);\n        item.attr('data-' + name, value);\n        break;\n\n      case 'xicon':\n        if (type == 'item') {\n          currentSelected.closest('li').attr('data-' + name, value);\n          currentSelected.find('i').remove();\n          var escapedInputText = Drupal.checkPlain(value);\n          if (value) {\n            currentSelected.prepend(\n              $('<i class=\"' + escapedInputText + '\"></i>'),\n            );\n          }\n        }\n        break;\n\n      case 'caption':\n        if (type == 'item') {\n          currentSelected.closest('li').attr('data-' + name, value);\n          currentSelected.find('span.tbm-caption').remove();\n          var escapedInputText = Drupal.checkPlain(value);\n          if (value) {\n            currentSelected.append(\n              $('<span class=\"tbm-caption\">' + escapedInputText + '</span>'),\n            );\n          }\n        }\n        break;\n\n      case 'block':\n        if (currentSelected.find('ul[class*=\"level\"]').length == 0) {\n          if (value) {\n            $('#tbm-admin-mm-tb #toolbox-loading').show();\n            callAjax({\n              action: 'load_block',\n              block_id: value,\n              id: currentSelected.attr('id'),\n              showblocktitle: parseInt(\n                currentSelected.attr('data-showblocktitle'),\n              ),\n            });\n          } else {\n            currentSelected.find('.tbm-column-inner').html('');\n          }\n          currentSelected.attr('data-' + name, value);\n        }\n        break;\n    }\n  };\n  var callAjax = function (data) {\n    if (Drupal.TBMegaMenu.isLockedAjax()) {\n      window.setTimeout(function () {\n        callAjax(data);\n      }, 200);\n      return;\n    }\n    Drupal.TBMegaMenu.lockAjax();\n    switch (data.action) {\n      case 'load_block':\n        $.ajax({\n          type: 'POST',\n          url: drupalSettings.TBMegaMenu.saveConfigURL,\n          contentType: 'application/json; charset=utf-8',\n          data: JSON.stringify(data),\n          complete: function (msg) {\n            // Check if a valid block was loaded & a JSON object was returned.\n            var isJson = true;\n            try {\n              var resp = $.parseJSON(msg.responseText);\n            } catch (err) {\n              isJson = false;\n            }\n            // If we received a block, display it in the UI.\n            if (isJson) {\n              var content = resp.content ? resp.content : '';\n              var id = resp.id ? resp.id : '';\n              // Add a close (remove) button and bind a click event to it.\n              var close_button = $(\n                '<span class=\"close fa fa-times-circle\" title=\"' +\n                  Drupal.t('Remove this block') +\n                  '\">&nbsp;</span>',\n              );\n              var currentElement = $('#' + id);\n              if (currentElement.length) {\n                currentElement\n                  .children('.tbm-column-inner')\n                  .html('')\n                  .append(close_button)\n                  .append($(content))\n                  .find(':input')\n                  .removeAttr('name');\n                currentElement\n                  .children('.tbm-column-inner')\n                  .children('span.close')\n                  .click(function () {\n                    $(this).parent().html('');\n                  });\n              }\n              // Hide the loading animation.\n              $('#tbm-admin-mm-tb #toolbox-loading').hide();\n            }\n            // If no JSON was received display an error in the modal.\n            else {\n              var statusMsg = msg.responseText;\n              status_modal(msg.status, statusMsg);\n            }\n\n            Drupal.TBMegaMenu.releaseAjax();\n          },\n        });\n        break;\n\n      case 'load':\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  var defaultColumnsWidth = function (count) {\n    if (count < 1) {\n      return null;\n    }\n    var total = 12,\n      min = Math.floor(total / count),\n      widths = [];\n    for (var i = 0; i < count; i++) {\n      widths[i] = min;\n    }\n    widths[count - 1] = total - min * (count - 1);\n    return widths;\n  };\n\n  var bindEvents = function (els) {\n    if (megamenu.data('nav_all')) {\n      megamenu.data('nav_all', megamenu.data('nav_all').add(els));\n    } else {\n      megamenu.data('nav_all', els);\n    }\n\n    els.mouseover(function (event) {\n      megamenu.data('nav_all').removeClass('hover');\n      var $this = $(this);\n      clearTimeout(megamenu.attr('data-hovertimeout'));\n      megamenu.attr(\n        'data-hovertimeout',\n        setTimeout(function () {\n          $this.addClass('hover');\n        }, 100),\n      );\n      event.stopPropagation();\n    });\n    els.mouseout(function (event) {\n      clearTimeout(megamenu.attr('data-hovertimeout'));\n      $(this).removeClass('hover');\n    });\n    els.click(function (event) {\n      show_toolbox($(this));\n      event.stopPropagation();\n      return false;\n    });\n  };\n\n  var unbindEvents = function (els) {\n    megamenu.data('nav_all', megamenu.data('nav_all').not(els));\n    els.unbind('mouseover').unbind('mouseout').unbind('click');\n  };\n\n  var rebindEvents = function (els) {\n    unbindEvents(els);\n    bindEvents(els);\n  };\n\n  $.extend(Drupal.TBMegaMenu, {\n    prepare: function () {\n      $('#tbm-admin').removeClass('hidden');\n    },\n    tb_megamenu: function (form, ctrlelm, ctrl, rsp) {\n      $('#tbm-admin-mm-container')\n        .html(rsp)\n        .megamenuAdmin()\n        .find(':input')\n        .removeAttr('name');\n    },\n    initPanel: function () {\n      $('#jform_params_mm_panel').hide();\n    },\n    initPreSubmit: function () {\n      var form = document.adminForm;\n      if (!form) {\n        return false;\n      }\n\n      var onsubmit = form.onsubmit;\n      form.onsubmit = function (e) {\n        $('.toolbox-saveConfig').trigger('click');\n        if ($.isfunction(onsubmit)) {\n          onsubmit();\n        }\n      };\n    },\n    initRadioGroup: function () {\n      var tb_megamenu_instance = $('.tbm-admin');\n      tb_megamenu_instance.find('.radio.btn-group label').addClass('btn');\n      tb_megamenu_instance\n        .find('.btn-group label')\n        .unbind('click')\n        .click(function () {\n          var label = $(this),\n            input = $('#' + label.attr('for'));\n          if (!input.attr('checked')) {\n            label\n              .closest('.btn-group')\n              .find('label')\n              .removeClass('active btn-success btn-danger btn-primary');\n            label.addClass(\n              'active ' +\n                (input.val() == ''\n                  ? 'btn-primary'\n                  : input.val() == 0\n                  ? 'btn-danger'\n                  : 'btn-success'),\n            );\n            input.attr('checked', true).trigger('change');\n          }\n        });\n\n      tb_megamenu_instance\n        .find('input[type=radio]')\n        .bind('update', function () {\n          if (this.checked) {\n            $(this)\n              .closest('.btn-group')\n              .find('label')\n              .removeClass('active btn-success btn-danger btn-primary')\n              .filter('[for=\"' + this.id + '\"]')\n              .addClass(\n                'active ' +\n                  ($(this).val() == ''\n                    ? 'btn-primary'\n                    : $(this).val() == 0\n                    ? 'btn-danger'\n                    : 'btn-success'),\n              );\n          }\n        });\n\n      tb_megamenu_instance\n        .find('.btn-group input[checked=checked]')\n        .each(function () {\n          if ($(this).val() == '') {\n            $('label[for=' + $(this).attr('id') + ']').addClass(\n              'active btn-primary',\n            );\n          } else if ($(this).val() == 0) {\n            $('label[for=' + $(this).attr('id') + ']').addClass(\n              'active btn-danger',\n            );\n          } else {\n            $('label[for=' + $(this).attr('id') + ']').addClass(\n              'active btn-success',\n            );\n          }\n        });\n    },\n  });\n\n  $(window).on('load', function () {\n    Drupal.TBMegaMenu.initPanel();\n    Drupal.TBMegaMenu.initPreSubmit();\n    Drupal.TBMegaMenu.initRadioGroup();\n    Drupal.TBMegaMenu.prepare();\n  });\n})(jQuery, Drupal, drupalSettings);\n"],"sourceRoot":""}